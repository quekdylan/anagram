<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Anagram</title>
    <!--Bootstrap CSS, JavaScript/JQuery files -->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <!--Custom styles-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600&display=swap" rel="stylesheet">

    <style>
        .heading {
            font-family: 'Nunito', sans-serif;
            color: #666;
            text-decoration: none;
            cursor: pointer;
        }

        .letter {
            display: flex;
            background-color: #eee;
            border: grey 4px solid;
            border-radius: 10px;
            width: 25vw;
            height: 25vw;
            margin: 5px;
            max-height: 186px;
            font-family: 'Nunito', sans-serif;
            font-size: 10vw;
            justify-content: center;
            align-items: center;
            transition: background-color 0.1s ease-out;
            cursor: pointer;
        }

        .letter_clicked {
            background-color: #aaa !important;
            border: #444 4px solid;
        }

        .letter_correct {
            background-color: #52ff9a !important;
            border: #22824a 4px solid;
        }

        .letter_wrong {
            background-color: #ff5d52 !important;
            border: #822222 4px solid;
        }

        #l4 {
            background-color: #91c3ff;
            border: #406fa8 6px solid;
            color: #1d314a;
        }

        .button {
            border: none;
            text-decoration: none;
            display: inline-block;
            background-color: #ff5d52;
            border-radius: 10000px;
            width: 16vw;
            height: 16vw;
            max-width: 100px;
            max-height: 100px;
        }

        #clear_btn {
            background-color: #ff5d52;
            border: #a13830 4px solid;
            transition: background-color 0.1s ease-out;
        }

        #clear_btn:hover {
            background-color: #c4473e
        }

        #clear_btn:active {
            background-color: #a13830
        }

        #submit_btn {
            background-color: #49e98c;
            border: #39b16b 4px solid;
            transition: background-color 0.1s ease-out;
        }

        #submit_btn:hover {
            background-color: #3ec777;
        }

        #submit_btn:active {
            background-color: #39b16b;
        }

        #textbox {
            border: none;
            text-align:center;
            font-size: 4vw;
            font-family: 'Nunito', sans-serif;
            width: 40vw;
            max-width: 600px;
            caret-color: transparent;
            transition: all 0.2s;
            text-transform: uppercase;
            cursor: default;
            outline: none;
        }

        .bi {
            max-width: 50px;
            max-height: 50px;
        }

        .letter_background {
            background-color: #ddd;
            border-radius: 4px;
            width: 20px;
            height: 30px;
            margin: 2px;
        }

        .letter_row {
            display: flex;
            flex-flow: row nowrap;
            margin-bottom: 10px;
        }

        @media screen and (min-width: 860px) {
            .letter {
                font-size: 84px;
            }
            #textbox {
                width: 250px;
                font-size: 32px;
            }
        }
                
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid d-flex justify-content-center">
                <a class="heading" style="font-size: 2em;" href="#">anagram</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="d-flex justify-content-center">
            <div style="max-width: 600px; margin-top: 10px;">
                <div class="d-flex flex-row justify-content-between">
                    <div></div>
                    <div>
                        <h1 id="score" class="heading" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBackdrop" aria-controls="offcanvasWithBackdrop">0</h1>
                    </div>
                    <div></div>
                </div>
                <div id="letter_box">
                    <div class="d-flex flex-row">
                        <div class="letter" id="l0"></div>
                        <div class="letter" id="l1"></div>
                        <div class="letter" id="l2"></div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="letter" id="l3"></div>
                        <div class="letter" id="l4"></div>
                        <div class="letter" id="l5"></div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="letter" id="l6"></div>
                        <div class="letter" id="l7"></div>
                        <div class="letter" id="l8"></div>
                    </div>
                </div>
                <div class="d-flex flex-row justify-content-between align-items-center mt-4 px-1">
                    <div>
                        <button class="button" id="clear_btn">                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="6vw" height="6vw" fill="white" class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"/>
                                <path fill-rule="evenodd" d="M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"/>
                            </svg>
                        </button>
                    </div>
                    <div>
                        <input type="text" id="textbox" onkeypress="return /[a-z]/i.test(event.key)" maxlength="9" onblur="this.focus()"/> 
                    </div>
                    <div>
                        <button class="button" id="submit_btn">                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="6vw" height="6vw" fill="white" class="bi bi-check-lg" viewBox="0 0 16 16">
                                <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop" aria-labelledby="offcanvasWithBackdropLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasWithBackdropLabel">Word list</h5>
              <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body" id="wordList">
              
            </div>
        </div>

    </main>
    <footer>
    </footer>
</body>
<script>
    var puzzle = "ENCDTONER";
    var answer = ["CONTENDER", "TENDER", "T"];
    var input = "";
    var guesses = [""];
    var board = ["l0", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8"];


    // Initialization
    for (i in puzzle){
        char = puzzle[i];
        var id = "#l" + i.toString();
        $( id ).html(char);
    };

    $("#textbox").focus();

    for (i in answer) {
        id = "word" + i
        $("#wordList").append('<div id='+id+' class="letter_row"></div>');
        for (x in answer[i]) {
            $("#"+id).append('<div class="letter_background"></div>');
        }
    }
    ////////////////////////////

    function resetBoard() {
        board = ["l0", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8"];
        $("#textbox").val("");
        $(".letter").removeClass("letter_clicked");
    }

    function submit() {
        //correct
        if (answer.includes($("#textbox").val().toUpperCase())){
            if (guesses.includes($("#textbox").val())){
                console.log($("#textbox").val())
            }
            else{
                $(".letter_clicked").addClass("letter_correct");
                setTimeout(function(){
                    $(".letter").removeClass("letter_correct");
                }, 400);
                guesses.push($("#textbox").val())
                $("#score").html(guesses.length)
                console.log("1")
            }
        }
        //wrong
        else {
            console.log("2")
            $(".letter_clicked").addClass("letter_wrong");
            setTimeout(function(){
                $(".letter").removeClass("letter_wrong");
            }, 400);
        };
        resetBoard();
    };

    $( ".letter" ).click(function() {
        if(!$(this).hasClass("letter_clicked")){
            $( this ).addClass("letter_clicked");
            $("#textbox").val($("#textbox").val() + $(this).text());
            i = board.indexOf(($(this).attr('id')));
            board.splice(i, 1);
            console.log(board);
        }
    });

    $( "#clear_btn" ).click(function() {
        resetBoard();
    });

    $( "#submit_btn" ).click(function () {
        submit();
    });

    // on backspace
    $('#textbox').keyup(function(e){
        if(e.keyCode == 8) {
            input = $("#textbox").val();
            for (i in input){
                
            }
        }
        if (event.keyCode === 13) {
            submit();
        }
        if(e.key === "Escape") {
            resetBoard();
        }
    })  

    $('#textbox').on('input', function() {
        input = $("#textbox").val();
        lastchar = $("#textbox").val().slice(-1).toUpperCase();
        console.log(lastchar)
        if(puzzle.includes(lastchar) && lastchar != ""){
            var i = puzzle.indexOf(lastchar)
            var id = "#l" + i.toString();
            $( id ).addClass("letter_clicked");
        }

    });

    $( "#score" ).click(function() {
        
    });




</script>
</html>